!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};/*! @bluemango/slp-helper - v1.2.1 - 2017-08-11 */
window.lemonpi=window.lemonpi||[],function(){var e="padding: 1px 6px 0; border-radius: 2px; background: #fbde00; color: #444",t={booleans:["available"],numbers:["advertiserId","dynamicInputId"],strings:["category","clickUrl","custom1","custom2","custom3","custom4","description","expiresOn","id","imageUrl","logoUrl","priceDiscount","priceNormal","stickerText","title","type"],required:["advertiserId","available","category","clickUrl","dynamicInputId","imageUrl","title","type"]},n=t.booleans.concat(t.numbers,t.strings),a={debug:/lemonpi_debug/.test(window.top.location.href),optionalFields:[],timeout:500},s=void 0,c=void 0,u=[],d=void 0,l=function(e){for(var t=JSON.stringify(e),n=0,o=void 0,r=0;r<t.length;r+=1)o=t.charCodeAt(r),n=(n<<5)-n+o,n|=0;return n.toString()},p=function(t){console.log("%cSLP%c "+t,e,"color: red")},f=function(e){return window.top.location.pathname.split("/").filter(function(e){return e}).map(function(e){return decodeURI(e)})[e]},h=function(e){return window.top.location.search.replace(/^\?/,"").split("&").filter(function(e){return e}).reduce(function(e,t){return i(e,o({},decodeURI(t.split("=")[0]),decodeURI(t.split("=")[1])))},{})[e]},m=function(e){i(a,e),a.testUrl&&a.testUrl.test&&!a.testUrl.test(window.top.location.href)&&c.push("The URL doesn't match '"+a.testUrl.toString()+"'")},b=function(e,t){var n=void 0;try{n=t()}catch(t){-1===u.indexOf(e)&&(c.push("Something went wrong in the '"+e+"' function: "+t.message),u.push(e))}return n},g=function(e){var t=window.top.location.protocol+"//"+window.top.location.host+window.top.location.pathname;if(e){var n=!1;if(e.allowedParameters&&e.allowedParameters.length&&e.allowedParameters.forEach(function(e){var o=n?"&":"?",r=encodeURI(e),i=h(e);void 0!==i&&(t+=""+o+r+"="+encodeURI(i),n=!0)}),e.customParameters){Object.keys(e.customParameters).forEach(function(o){var r=n?"&":"?",i=encodeURI(o),a=encodeURI(e.customParameters[o]);t+=""+r+i+"="+a,n=!0})}e.hash&&(t+=window.top.location.hash)}return t},w=function(e,n){var o=n;switch("function"==typeof o&&(o=b(e,o)),void 0===o?"undefined":r(o)){case"boolean":-1===t.booleans.indexOf(e)&&-1===u.indexOf(e)&&(c.push("'"+e+"' doesn't expect a boolean value"),u.push(e));break;case"number":-1===t.numbers.indexOf(e)&&-1===u.indexOf(e)&&(c.push("'"+e+"' doesn't expect a number value"),u.push(e));break;case"string":o=o.trim(),-1===t.strings.indexOf(e)&&-1===u.indexOf(e)&&(c.push("'"+e+"' doesn't expect a string value"),u.push(e)),-1!==["category","id"].indexOf(e)&&/[^\da-z-]/.test(o)?(c.push("'"+e+"' only allows lowercase letters, numbers and dashes"),u.push(e)):-1===["clickUrl","imageUrl","logoUrl"].indexOf(e)||/^https?:\/\//.test(o)?-1!==["expiresOn"].indexOf(e)&&"Invalid Date"===new Date(o).toString()&&(c.push("'"+e+"' should be an ISO 8601 formatted datetime string"),u.push(e)):(c.push("'"+e+"' should be an URL and start with 'http://' or 'https://'"),u.push(e));break;default:-1===u.indexOf(e)&&(c.push("'"+e+"' can't be of type "+(void 0===o?"undefined":r(o))),u.push(e))}return o},y=function o(r,i){if(s={},c=[],u=[],window.top.location.host!==window.self.location.host)return void p("The Smart LemonPI Pixel is placed in an unfriendly iframe");r.config&&m(r.config),Object.keys(r).forEach(function(e){-1!==n.indexOf(e)&&(s[e]=w(e,r[e]))}),Object.keys(s).forEach(function(e){void 0!==s[e]&&""!==s[e]||(delete s[e],-1===a.optionalFields.indexOf(e)&&-1===u.indexOf(e)&&(c.push("'"+e+"' is empty"),u.push(e)))}),-1!==["propInBasket","propPurchased"].indexOf(s.type)&&(t.required=["id","advertiserId","dynamicInputId"]),t.required.forEach(function(e){-1===Object.keys(s).indexOf(e)&&-1===u.indexOf(e)&&(c.push("'"+e+"' is required and missing"),u.push(e))});var f=l(s);f!==d&&(d=f,s.id||(s.id=f),a.debug&&(c.forEach(p),i||console.log("%cSLP",e,"Result:",s)),!c.length&&(i?i(s):window.lemonpi.push(s),a.scrapeOnce))||setTimeout(function(){o(r)},a.timeout)};window.slp={getUrl:g,getUrlPathSegment:f,getUrlQueryParameter:h,scrape:y}}()}]);