/*! slp-helper v1.9.0 - 2018/09/19 */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){function r(e,t,o){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}window.lemonpi=window.lemonpi||[],function(){var e="padding:1px 6px 0;border-radius:2px;background:#fbde00;color:#444",t={booleans:["available"],numbers:["advertiserId","dynamicInputId"],strings:["category","clickUrl","custom1","custom2","custom3","custom4","description","expiresOn","id","imageUrl","logoUrl","priceDiscount","priceNormal","stickerText","title","type"],required:["advertiserId","dynamicInputId","imageUrl","title"]},n=t.booleans.concat(t.numbers,t.strings),c={debug:/lemonpi_debug/.test(window.location.href),optionalFields:[],interval:500},a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=JSON.stringify(t),o=0,i=0;i<n.length;i+=1)o=(o<<5)-o+n.charCodeAt(i),o|=0;return o.toString()},s=function(t,r){console.log("%cSLP%c ".concat(t,"%c ").concat(r),e,"color:red;font-weight:bold","color:red")},u=function(){return window.location.pathname.split("/").filter(function(e){return e}).map(function(e){return decodeURI(e)})},l=function(){return window.location.search.replace(/^\?/,"").split("&").filter(function(e){return e}).reduce(function(e,t){return i(e,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},decodeURI(t.split("=")[0]),decodeURI(t.split("=")[1])))},{})},d=function(e){return l()[e]},f=function(e){var t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname);if(e){var r=!1;if(e.allowedParameters&&e.allowedParameters.length&&e.allowedParameters.forEach(function(e){var n=r?"&":"?",o=encodeURI(e),i=d(e);void 0!==i&&(t+="".concat(n).concat(o,"=").concat(encodeURI(i)),r=!0)}),e.customParameters)Object.keys(e.customParameters).forEach(function(n){var o=r?"&":"?",i=encodeURI(n),c=encodeURI(e.customParameters[n]);t+="".concat(o).concat(i,"=").concat(c),r=!0});(e.hash||e.allowHash)&&(t+=window.location.hash)}return t},p=function(r,u){var l=this;this.config=i({},c),this.input=r,this.callback=u,this.result={},this.errors=[],this.pointerCoords=[],this.lastScrapedHash="",this.interactedStateHash="",this.getUserInteracted=function(){var e=document.body.getBoundingClientRect(),t=a(e,l.pointerCoords);return l.interactedStateHash!==t&&(l.interactedStateHash=t,!0)},this.handleFunction=function(e,t){var r;try{r=t()}catch(t){l.errors[e]||-1!==l.config.optionalFields.indexOf(e)||(l.errors[e]=t.message)}return r},this.getValue=function(e,r){var n=r;switch("function"==typeof n&&(n=l.handleFunction(e,n)),o(n)){case"boolean":l.errors[e]||-1!==t.booleans.indexOf(e)||(l.errors[e]="doesn't expect a boolean value");break;case"number":l.errors[e]||-1!==t.numbers.indexOf(e)||(l.errors[e]="doesn't expect a number value");break;case"string":switch(n=n.replace(/\s+/g," ").trim(),l.errors[e]||-1!==t.strings.indexOf(e)||(l.errors[e]="doesn't expect a string value"),e){case"category":case"id":n=n.toLowerCase().replace(/[^\da-z]/g,function(e){return"aaaaaaoooooooeeeecdiiiiuuuuunsyyz"["àáâãäåòóôõöőøèéêëçðìíîïùúûüűñšÿýž".indexOf(e)]||" "}).trim().replace(/\s+/g,"-");break;case"clickUrl":case"imageUrl":case"logoUrl":l.errors[e]||/^https?:\/\//.test(n)||(l.errors[e]="should be a URL and start with 'http://' or 'https://'");break;case"expiresOn":l.errors[e]||"Invalid Date"!==new Date(n).toString()||(l.errors[e]="should be an ISO 8601 formatted datetime string");break;case"type":l.errors[e]||-1!==["propInBasket","propPurchased","propSeen"].indexOf(n)||(l.errors[e]="should be 'propSeen', 'propInBasket', or 'propPurchased'")}break;case"undefined":-1!==l.config.optionalFields.indexOf(e)||l.errors[e]||(l.errors[e]="is undefined");break;default:l.errors[e]||(l.errors[e]="can't be of type ".concat(o(n)))}return n},this.scrape=function(){l.result={},l.errors={},Object.keys(l.input).forEach(function(e){-1!==n.indexOf(e)&&(l.result[e]=l.getValue(e,l.input[e]))}),Object.keys(l.result).forEach(function(e){void 0!==l.result[e]&&""!==l.result[e]||(delete l.result[e],l.errors[e]||-1!==l.config.optionalFields.indexOf(e)||(l.errors[e]="is empty"))}),-1!==["propInBasket","propPurchased"].indexOf(l.result.type)&&(t.required=["id","advertiserId","dynamicInputId"]),t.required.forEach(function(e){l.errors[e]||-1!==Object.keys(l.result).indexOf(e)||(l.errors[e]="is required and missing")});var r=a(l.result);if(r!==l.lastScrapedHash||l.config.longestViewed&&l.getUserInteracted())if(l.lastScrapedHash=r,l.result.type||(l.result.type="propSeen"),"propSeen"===l.result.type&&(l.result.id||(l.result.id=r),l.result.category||(l.result.category="none"),void 0===l.result.available&&(l.result.available=!0),l.result.clickUrl||(l.result.clickUrl=f())),l.config.debug&&Object.keys(l.errors).forEach(function(e){s(e,l.errors[e])}),Object.keys(l.errors).length)l.config.debug&&console.log("%cSLP%c Scrape unsuccessful:",e,"color:red",l.result);else{if(l.config.debug&&console.log("%cSLP%c Scrape successful:",e,"color:green",l.result),l.callback?l.callback(l.result):window.lemonpi.push(l.result),!l.config.watchChanges&&!l.config.longestViewed)return;l.input.config.longestViewed&&(l.config.interval=5e3)}setTimeout(function(){l.scrape()},l.config.interval)},this.input.config&&(this.input.config.longestViewed&&document.addEventListener("mousemove",function(e){l.pointerCoords=[e.pageX,e.pageY]}),i(this.config,this.input.config),this.config.testUrl&&this.config.testUrl.test&&!this.config.testUrl.test(window.location.href))?this.config.debug&&s("The URL","doesn't match '".concat(this.config.testUrl.toString(),"'")):this.scrape()};window.slp=window.slp||{getBackgroundImageUrl:function(e){var t=e;if("string"==typeof e&&(t=document.querySelector(e)),t){var r=window.getComputedStyle(t).getPropertyValue("background-image").replace(/url\(['"]?|['"]?\)/g,"");return"none"===r?void 0:r}},getUrlQueryParameters:l,getUrlQueryParameter:d,getUrlPathSegments:u,getUrlPathSegment:function(e){return u()[e]},generateHash:a,setCookie:function(e,t){var r="string"==typeof t?t:JSON.stringify(t);document.cookie="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r))},getCookie:function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length){var r=decodeURIComponent(t.pop().split(";").shift());try{r=JSON.parse(r)}catch(e){}return r}},getUrl:f,scrape:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(p,t)}}}()}]);